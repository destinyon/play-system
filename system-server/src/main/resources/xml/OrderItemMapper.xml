<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.mapper.OrderItemMapper">

  <resultMap id="OrderItemResult" type="com.example.entity.OrderItem">
    <id property="id" column="id" />
    <result property="orderId" column="order_id" />
    <result property="dishId" column="dish_id" />
    <result property="dishName" column="dish_name" />
    <result property="dishImage" column="dish_image" />
    <result property="unitPrice" column="unit_price" />
    <result property="quantity" column="quantity" />
  </resultMap>

  <insert id="insert" parameterType="com.example.entity.OrderItem" useGeneratedKeys="true" keyProperty="id">
    INSERT INTO order_item
      (order_id, dish_id, dish_name, dish_image, unit_price, quantity)
    VALUES
      (#{orderId}, #{dishId}, #{dishName}, #{dishImage}, #{unitPrice}, #{quantity})
  </insert>

  <select id="listByOrderId" resultMap="OrderItemResult">
    SELECT *
    FROM order_item
    WHERE order_id = #{orderId}
    ORDER BY id ASC
  </select>

  <delete id="deleteByOrderId">
    DELETE FROM order_item WHERE order_id = #{orderId}
  </delete>

</mapper>
